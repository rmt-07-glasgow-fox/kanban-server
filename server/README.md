# Kanban Server
This app has : 
* RESTful endpoint for Kanban Server
* JSON formatted response

&nbsp;

## Endpoints for User
### POST /register

> Post User Register

_Request Body_
```
{
    "email": "spiderman",
    "username": "spiderman@gmail.com",
    "password": "123456"
}
```

_Response (201 - created)_
```
{
    "id": "1",
    "email": "spiderman@gmail.com",
    "username": "spiderman"
}
```

_Response (400 - Bad request)_
```
{
    "message": [
        "Username must be filled",
        "Username minimum 6 characters",
        "Username must be unique",
        "Email must be filled",
        "Email not valid",
        "Email must be unique",
        "Password must be filled",
        "Password at least 6 characters"
    ]
}
```

### POST /login

> Post User Login

_Request Body_
```
{
    "email": "spiderman@gmail.com",
    "password": "123456"
}
```

_Response (200 - OK)_
```
{
    "access_token": "<generated by system>",
    "username": "spiderman"
}
```

_Response (401 Bad - Unautorized)_
```
{
    "message": [
        "Email not found, please register first",
        "Invalid Email/password"
    ]
}
```

## Endpoints for Kanban
### GET /kanban

> Get all task list

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```
[
  {
      "id": 1,
      "title": "test ",
      "CategoryId": 1,
      "UserId": 2,
      "createdAt": "2021-01-15T09:28:26.492Z",
      "updatedAt": "2021-01-15T09:28:26.492Z",
      "User": {
          "username": "superman"
      },
      "Category": {
          "name": "Backlog"
      }
  },
  {
      "id": 2,
      "title": "test google login",
      "CategoryId": 2,
      "UserId": 3,
      "createdAt": "2021-01-15T09:28:42.152Z",
      "updatedAt": "2021-01-15T09:28:42.152Z",
      "User": {
          "username": "Arif Santoso"
      },
      "Category": {
          "name": "Todo"
      }
  },
  {
      "id": 3,
      "title": "hi, aku admin",
      "CategoryId": 3,
      "UserId": 1,
      "createdAt": "2021-01-15T09:28:57.879Z",
      "updatedAt": "2021-01-15T09:28:57.879Z",
      "User": {
          "username": "admin123"
      },
      "Category": {
          "name": "Doing"
      }
  }
]
```

_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### POST /kanban

> Create new task

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Body_
```
{
  "title": "Task 3",
  "categoryId": "1",
}
```

_Response (201 - Created)_
```
{
  "id": 5,
  "title": "Task 1",
  "CategoryId": 1,
  "UserId": 2,
  "updatedAt": "2021-01-15T09:42:13.987Z",
  "createdAt": "2021-01-15T09:42:13.987Z"
}
```

_Response (400 - Bad Request)_
```
{
  "message": [
      "Title must be filled"
  ]
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### GET /kanban/:id

> Get task by id

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```

_Response (200 - OK)_
```
{
  "id": 5,
  "title": "Task 1",
  "CategoryId": 1,
  "UserId": 2,
  "createdAt": "2021-01-15T09:42:13.987Z",
  "updatedAt": "2021-01-15T09:42:13.987Z",
  "User": {
      "username": "superman"
  },
  "Category": {
      "name": "Backlog"
    }
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "User not authorized"
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### PUT /kanban/:id

> Edit task value

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```
_Request Body_
```
{
  "title": "Task 3 revisi",
  "categoryId": "2",
}
```

_Response (200 - OK)_
```
{
    "id": 1,
    "title": "Task 3 revisi",
    "CategoryId": 2,
    "UserId": 2,
    "createdAt": "2021-01-15T09:28:26.492Z",
    "updatedAt": "2021-01-15T09:45:48.999Z"
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "User not authorized"
}
```

_Response (400 - Bad Request)_
```
{
  "message": [
      "Title must be filled"
  ]
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### PATCH /kanban/:id

> Edit category task

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```
_Request Body_
```
{
  "categoryId": "3"
}
```

_Response (200 - OK)_
```
{
    "id": 1,
    "title": "Task 3 revisi",
    "CategoryId": 3,
    "UserId": 2,
    "createdAt": "2021-01-15T09:28:26.492Z",
    "updatedAt": "2021-01-15T09:47:47.598Z"
}
```

_Response (400 - Bad Request)_
```
{
  "message": "Status must filled by true/false"
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "User not authorized"
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### DELETE /kanban/:id

> Delete task

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```
_Request Body_
```
not needed
```

_Response (200 - OK)_
```
{
    "message": "Delete task success"
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "User not authorized"
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
## Endpoints for Category
### GET /categories

> Get all categories list

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```
[
    {
        "id": 1,
        "name": "Backlog",
        "UserId": 1,
        "createdAt": "2021-01-15T09:27:09.580Z",
        "updatedAt": "2021-01-15T09:27:09.580Z"
    },
    {
        "id": 2,
        "name": "Todo",
        "UserId": 1,
        "createdAt": "2021-01-15T09:27:09.580Z",
        "updatedAt": "2021-01-15T09:27:09.580Z"
    },
    {
        "id": 3,
        "name": "Doing",
        "UserId": 1,
        "createdAt": "2021-01-15T09:27:09.580Z",
        "updatedAt": "2021-01-15T09:27:09.580Z"
    },
    {
        "id": 4,
        "name": "Done",
        "UserId": 1,
        "createdAt": "2021-01-15T09:27:09.580Z",
        "updatedAt": "2021-01-15T09:27:09.580Z"
    }
]
```

_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### POST /categories

> Create new category

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Body_
```
{
  "name": "Review"
}
```

_Response (201 - Created)_
```
{
    "id": 6,
    "name": "Review",
    "UserId": 2,
    "updatedAt": "2021-01-15T09:52:25.414Z",
    "createdAt": "2021-01-15T09:52:25.414Z"
}
```

_Response (400 - Bad Request)_
```
{
  "message": [
      "Category name must be filled",
      "Category name must be unique"
  ]
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### PATCH /categories/:id

> Edit category name

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```
_Request Body_
```
{
  "name": "Progres",
}
```

_Response (200 - OK)_
```
{
    "id": 6,
    "name": "Progres",
    "UserId": 2,
    "createdAt": "2021-01-15T09:52:25.414Z",
    "updatedAt": "2021-01-15T09:55:46.818Z"
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "User not authorized"
}
```

_Response (400 - Bad Request)_
```
{
  "message": [
    "Category name must be filled",
    "Category must be unique"
  ]
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### DELETE /categories/:id

> Delete task

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```
_Request Body_
```
not needed
```

_Response (200 - OK)_
```
{
    "message": "Delete category success"
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "User not authorized"
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```